config:
  target: 'https://search.api.hubmapconsortium.org'
  phases:
    - duration: 5 # seconds
      arrivalRate: 5 # scenarios started per second
  processor: "./helper.js"
scenarios:
  - flow:
    - post:
        url: "/portal/search"
        headers:
          'Content-Type': application/json
        body: "{{ $processEnvironment.DATA_TYPES_QUERY }}"
        gzip: true
        afterResponse: "printStatus"
    - post:
        url: "/portal/search"
        headers:
          'Content-Type': application/json
        body: "{{ $processEnvironment.ENTITY_TYPES_QUERY }}"
        gzip: true
        afterResponse: "printStatus"
    - post:
        url: "/portal/search"
        headers:
          'Content-Type': application/json
          'Authorization': "Bearer {{ $processEnvironment.NEXUS_TOKEN }}"
        body: "{{ $processEnvironment.DATASETS_QUERY }}"
        gzip: true
        afterResponse: "printStatus"