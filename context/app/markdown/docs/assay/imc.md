
### **Image_Mass_Cytometry (IMC)**

**Last Updated:** 6/22/2020

**Overview:** 
This document describes Imaging Mass Cytometry technology, generated data files & data levels, file structure, metadata fields, QA/QC thresholds, and HIVE data processing.

**Description:** 
[Imaging Mass Cytometry](http://www.bodenmillerlab.com/research-2/imaging-mass-cytometry/) combines standard immunohistochemistry with CyTOF mass cytometry to resolve the cellular localization of up to 40 proteins in a tissue sample. Multiplexing of dozens of proteins is possible because the antibodies are tagged with rare-earth metal isotopes of defined atomic mass rather than fluorophores which are subject to spectral signal overlap. High-resolution laser ablation of tissue stained with these antibody-metal conjugates generates clouds of tissue particles which are atomized, ionized, and detected in a time-of-flight mass cytometer. Signals are then plotted against the coordinates of each single laser shot to synthesize one image per mass channel, with high-dimensional images produced by overlaying images from multiple channels.
![](https://lh6.googleusercontent.com/ox0uDpu8JTG8Ovwiuwfp1EvWBM7oq6ambvhbmMM0A-M7gppofNs3PaNiFuCq-JA93D-aSfwwTGKnzax-aiDV_khQbQJLYakui3vdvFBp-L1rDlfyegAl7Eq60dJ5pBpDD8YApg0)

*Figure 1.*  from [Giesen et al., Nature Methods, 2014 Apr;11(4):417-22)](https://www.nature.com/articles/nmeth.2869)
**Definitions:** 
The following is a table of terms relevant to understanding IMC data:

|**Term** |  **Definition**
|--|--|
|  IMC| Imaging Mass Cytometry| 
|  Conjugated Antibody| An antibody covalently coupled to a metal isotope via a polymer.| 
|  Pulse| Analog value converted from voltage generated by a particle striking the detector.| 
|  Pulse Count| The number of pulses induced by ions arriving at the detector.| 
|  Intensity| Integral of overlapping ion-induced pulses.| 
|  (Dual) counts| The measured counts in IMC are dual counts (Counts = Intensity * Dual Count Coefficient).| 
|  (Mass) channel| Name of the metal isotope detected (e.g. 113In, 149Sm).| 
|  Target| Name of the epitope targeted by the antibody conjugated to the detected metal isotope (e.g. Histone H3, CD20).| 
|  ROI| Region of Interest - User defined imaging area.| 
|  Pixel| Each pixel in an IMC image corresponds to a single laser shot and is the smallest component of that image.| 

**HuBMAP IMC Data States (Levels):**
|**Data Levels** |  **Description**| **Example File Type** | 
|--|--|--|
|  0 | Raw image data: Image stacks for each region of interest containing all channel images.| OME, TIFF
| 1 |  Segmented data: Single cell data extracted after segmentation.|  CSV, TIFF
| 2 |  Annotated data (Cells and Structures): Interpretation of marker expression profiles enabled the assignment of cell types to clusters.|  PNG, PDF
**HuBMAP Metadata:** 
All HuBMAP IMC data will have searchable metadata fields. The metadata.tsv is available for download from [Github](https://github.com/hubmapconsortium/ingest-validation-tools/tree/master/docs/imc) where the descriptions and required field input formats can be found

In addition, all HuBMAP IMC data will have an associated “acquisition_metadata.csv” file containing the following additional metadata fields:

|"AblationPower" |  Relative ablation power (arbitrary units).
|--|--|
|  “AfterAblationImageEndOffset”| The number of bytes from the beginning of the MCD file where the respective entity is stored as binary.| 
|  “AfterAblationImageStartOffset”| The number of bytes from the beginning of the MCD file where the respective entity is stored as binary.| 
|  “BeforeAblationImageEndOffset”| The number of bytes from the beginning of the MCD file where the respective entity is stored as binary.| 
|  “BeforeAblationImageStartOffset”| The number of bytes from the beginning of the MCD file where the respective entity is stored as binary.| 
|  “DataEndOffset”| The number of bytes from the beginning of the MCD file where the respective entity is stored as binary.| 
|  “DataStartOffset”| The number of bytes from the beginning of the MCD file where the respective entity is stored as binary.| 
|  “Description”| A description of the region of interest.| 
|  “MovementType”| Pattern of laser ablation over the tissue surface.| 
|  “ROIEndXPosUm”| End X-coordinates of the region of interest (µm).| 
|  “ROIEndYPosUm”| End Y-coordinates of the region of interest (µm)| 
|  “ROIStartXPosUm”| Start X-coordinates of the region of interest (µm). Note: This value must be divided by 1000 to correct for a bug (missing decimal point) in the Fluidigm software.| 
|  “ROIStartYPosUm”| Start Y-coordinates of the region of interest (µm). Note: This value must be divided by 1000 to correct for a bug (missing decimal point) in the Fluidigm software.|
|  “Template”| Name of imported csv equivalent file specifying the antibody panel used for tissue staining.|

**HuBMAP IMC Raw File Structure:**
1.  *HuBMAP IMC Raw File Structure*
    A schematic of the general structure of the stage 0 (raw) data produced by the fluidigm software is shown below:
![](https://lh3.googleusercontent.com/Cv5xsGl9_tP2aoDD963MjNu-SViqg2a-iVpxAzk6o3IjlQnO-LtEu257NyIr1ZwA52cs8StTHUEL8CAJG9WoqnhN26MdcL5ivAhW6ALMR1t8wMglWyYUHEJPPobr0bSVEdpyfRI)
2) *HuBMAP IMC Processed Data File Description*

**HuBMAP QA/QC of raw (state0) data files:**

**CODEX Data Processing by the HIVE**

**For Additional Help:** Please contact:
<!--stackedit_data:
eyJoaXN0b3J5IjpbMTM1MzQwNTA2MSwxMDYxNzEzMzEsNTk3MD
czMjcsNDk3ODE4ODEwLDczMDk5ODExNl19
-->